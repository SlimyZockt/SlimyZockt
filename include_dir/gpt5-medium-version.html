<!doctype html>
<html lang="en" class="h-full scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Alex Doe — Portfolio</title>
    <meta name="description" content="Modern portfolio built with Tailwind CSS and Native Web Components." />

    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet" />

    <!-- Tailwind config BEFORE CDN script -->
    <script>
        tailwind = {
            config: {
                darkMode: "class",
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ["Inter", "system-ui", "Segoe UI", "Roboto", "sans-serif"],
                        },
                        colors: {
                            ink: {
                                950: "#070816",
                                900: "#0b1020",
                                800: "#121a2c",
                            },
                            brand: {
                                50: "#fdf4ff",
                                100: "#fae8ff",
                                200: "#f5d0fe",
                                300: "#f0abfc",
                                400: "#e879f9",
                                500: "#d946ef",
                                600: "#c026d3",
                                700: "#a21caf",
                                800: "#86198f",
                                900: "#701a75",
                            },
                            glow: {
                                500: "#22d3ee",
                                600: "#06b6d4",
                                700: "#0891b2",
                            },
                        },
                        boxShadow: {
                            glow: "0 0 40px rgba(168,85,247,0.25)",
                            soft: "0 10px 40px -10px rgba(0,0,0,0.4)",
                        },
                        backdropBlur: {
                            xs: "2px",
                        },
                        backgroundImage: {
                            "grid-radial":
                                "radial-gradient(1000px 600px at 10% -10%, rgba(168,85,247,.08), rgba(0,0,0,0)), radial-gradient(900px 500px at 100% 10%, rgba(34,211,238,.08), rgba(0,0,0,0))",
                        },
                    },
                },
            },
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Extra utilities via CDN -->
    <style type="text/tailwindcss">
        @layer utilities {
        .text-gradient {
          @apply bg-clip-text text-transparent bg-gradient-to-r from-brand-400
            via-glow-500 to-brand-600;
        }
        .card {
          @apply rounded-2xl bg-white/5 dark:bg-white/5 backdrop-blur
            border border-white/10 hover:border-white/20 transition
            hover:shadow-glow;
        }
        .tag {
          @apply rounded-full px-2.5 py-1 text-xs font-medium
            bg-white/10 border border-white/10;
        }
        .btn {
          @apply inline-flex items-center gap-2 rounded-xl px-4 py-2.5
            font-semibold transition shadow-soft;
        }
        .btn-primary {
          @apply bg-brand-600 hover:bg-brand-500 text-white;
        }
        .btn-ghost {
          @apply bg-white/5 hover:bg-white/10 border border-white/10;
        }
        .marquee {
          --speed: 45s;
          display: flex;
          overflow: hidden;
          mask-image: linear-gradient(
            to right,
            transparent,
            black 10%,
            black 90%,
            transparent
          );
        }
        .marquee-track {
          display: flex;
          gap: 1rem;
          padding-block: 0.5rem;
          min-width: 100%;
          animation: scroll var(--speed) linear infinite;
        }
        @keyframes scroll {
          to {
            transform: translateX(-50%);
          }
        }
      }
    </style>
</head>

<body class="h-full bg-ink-950 text-slate-100 antialiased selection:bg-brand-500/30 selection:text-brand-100">
    <!-- Background Bubbles (native web component) -->
    <bubble-background></bubble-background>

    <!-- Skip link -->
    <a href="#content"
        class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:bg-ink-800 focus:text-white focus:px-3 focus:py-2 focus:rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 z-50">Skip
        to content</a>

    <!-- Header (native web component) -->
    <site-header></site-header>

    <main id="content" class="relative">
        <section class="relative min-h-[92svh] pt-28 sm:pt-32 pb-12 sm:pb-20 overflow-hidden">
            <!-- Light grid accent -->
            <div aria-hidden="true" class="pointer-events-none absolute inset-0 bg-grid-radial"></div>

            <!-- Hero (native web component) -->
            <hero-section></hero-section>
        </section>

        <!-- Projects -->
        <section id="projects" class="relative container mx-auto px-6 sm:px-8 pb-8 sm:pb-16">
            <div class="flex items-end justify-between mb-6 sm:mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold">
                    Featured <span class="text-gradient">Projects</span>
                </h2>
                <a href="#contact" class="text-sm text-slate-300 hover:text-white transition">Work together →</a>
            </div>
            <projects-grid></projects-grid>
        </section>

        <!-- Skills -->
        <section class="relative container mx-auto px-6 sm:px-8 pb-8 sm:pb-16">
            <div class="card p-4 sm:p-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-slate-200">Skills & Tools</h3>
                    <span class="text-xs text-slate-400">Hover to pause • Drag to scroll</span>
                </div>
                <skills-marquee></skills-marquee>
            </div>
        </section>

        <!-- Contact -->
        <section id="contact" class="relative container mx-auto px-6 sm:px-8">
            <contact-section></contact-section>
        </section>
    </main>

    <site-footer></site-footer>

    <!-- Web Components -->
    <script type="module">
        // Theme setup on first load
        (() => {
            const user = localStorage.getItem("theme");
            const prefersDark = window.matchMedia(
                "(prefers-color-scheme: dark)"
            ).matches;
            if (user ? user === "dark" : prefersDark) {
                document.documentElement.classList.add("dark");
            }
        })();

        // Helper: SVG Icons
        const Icons = {
            moon: `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>`,
            sun: `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.364 6.364-1.414-1.414M8.05 8.05 6.636 6.636m10.728 0-1.414 1.414M8.05 15.95 6.636 17.364"/></svg>`,
            github: `<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2c-3.34.73-4.04-1.61-4.04-1.61-.55-1.41-1.34-1.79-1.34-1.79-1.09-.75.08-.74.08-.74 1.2.08 1.84 1.23 1.84 1.23 1.08 1.84 2.83 1.31 3.52 1 .11-.78.42-1.31.76-1.61-2.67-.31-5.47-1.34-5.47-5.97 0-1.32.47-2.39 1.23-3.23-.12-.31-.53-1.56.11-3.25 0 0 1-.32 3.3 1.23a11.4 11.4 0 0 1 6 0C16.42 5.2 17.43 5.5 17.43 5.5c.65 1.69.24 2.94.12 3.25.77.84 1.23 1.91 1.23 3.23 0 4.64-2.8 5.66-5.48 5.97.43.37.81 1.09.81 2.2v3.26c0 .32.21.69.82.58A12 12 0 0 0 12 .5Z"/></svg>`,
            link: `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M10 13a5 5 0 0 0 7.07 0l2.12-2.12a5 5 0 1 0-7.07-7.07L10 5"/><path d="M14 11a5 5 0 0 0-7.07 0L4.82 13.1a5 5 0 1 0 7.07 7.07L14 19"/></svg>`,
            ext: `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg>`,
            mail: `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M4 4h16v16H4z"/><path d="m22 6-10 7L2 6"/></svg>`,
            linkedin: `<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM0 8.98h5V24H0zM8.99 8.98H14v2.05h.08c.7-1.33 2.41-2.73 4.96-2.73 5.3 0 6.27 3.49 6.27 8.04V24h-5v-6.67c0-1.59-.03-3.63-2.21-3.63-2.21 0-2.55 1.73-2.55 3.52V24h-5z"/></svg>`,
            x: `<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M18.244 2H21l-6.98 7.98L22 22h-6.844l-5.35-6.447L3.667 22H1l7.48-8.55L2 2h6.844l4.98 6.11L18.244 2zm-2.395 17.5h1.852L8.27 4.4H6.29l9.56 15.1z"/></svg>`,
            download: `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/></svg>`,
            arrowR: `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>`,
            copy: `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>`,
            check: `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M20 6 9 17l-5-5"/></svg>`,
        };

        // Header component
        customElements.define(
            "site-header",
            class extends HTMLElement {
                connectedCallback() {
                    this.innerHTML = `
              <header
                class="fixed top-0 inset-x-0 z-40 backdrop-blur px-4 sm:px-6"
              >
                <div
                  class="mx-auto container my-3 sm:my-4 card border-white/10"
                >
                  <div
                    class="flex items-center justify-between px-4 sm:px-6 py-3"
                  >
                    <a
                      href="#"
                      class="flex items-center gap-2 font-extrabold tracking-tight"
                    >
                      <span
                        class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-gradient-to-br from-brand-500 to-glow-600 text-white shadow-glow"
                      >
                        A
                      </span>
                      <span class="text-slate-100">Alex Doe</span>
                    </a>
                    <nav class="hidden md:flex items-center gap-6 text-sm">
                      <a class="text-slate-300 hover:text-white" href="#projects"
                        >Projects</a
                      >
                      <a class="text-slate-300 hover:text-white" href="#contact"
                        >Contact</a
                      >
                      <a class="text-slate-300 hover:text-white" href="#about"
                        >About</a
                      >
                      <button
                        id="themeToggle"
                        class="ml-2 inline-flex h-9 w-9 items-center justify-center rounded-xl btn-ghost"
                        aria-label="Toggle theme"
                        title="Toggle theme"
                      ></button>
                    </nav>
                    <button
                      class="md:hidden inline-flex h-9 w-9 items-center justify-center rounded-xl btn-ghost"
                      id="menuBtn"
                      aria-label="Open menu"
                    >
                      ☰
                    </button>
                  </div>
                </div>
              </header>
            `;

                    const toggleBtn = this.querySelector("#themeToggle");
                    const setIcon = () => {
                        const dark = document.documentElement.classList.contains("dark");
                        toggleBtn.innerHTML = dark ? Icons.sun : Icons.moon;
                    };
                    const toggleTheme = () => {
                        const el = document.documentElement;
                        const dark = el.classList.toggle("dark");
                        localStorage.setItem("theme", dark ? "dark" : "light");
                        setIcon();
                    };
                    setIcon();
                    toggleBtn?.addEventListener("click", toggleTheme);

                    // Simple mobile menu (anchors only)
                    const menuBtn = this.querySelector("#menuBtn");
                    menuBtn?.addEventListener("click", () => {
                        const existing = this.querySelector("#mobileMenu");
                        if (existing) {
                            existing.remove();
                            return;
                        }
                        const panel = document.createElement("div");
                        panel.id = "mobileMenu";
                        panel.className =
                            "absolute top-[64px] inset-x-4 sm:inset-x-6 card p-3";
                        panel.innerHTML = `
                <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="#projects">Projects</a>
                <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="#contact">Contact</a>
                <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="#about">About</a>
                <button class="mt-2 w-full btn btn-ghost" id="themeToggleM">
                  <span class="mr-2">${Icons.moon}</span> Toggle theme
                </button>
              `;
                        this.appendChild(panel);
                        panel.querySelector("#themeToggleM")?.addEventListener(
                            "click",
                            () => {
                                document.documentElement.classList.toggle("dark");
                                const dark =
                                    document.documentElement.classList.contains("dark");
                                localStorage.setItem("theme", dark ? "dark" : "light");
                                setIcon();
                            }
                        );
                        panel.querySelectorAll("a").forEach((a) =>
                            a.addEventListener("click", () => panel.remove())
                        );
                    });

                    // Elevate header on scroll
                    const header = this.querySelector("header > div");
                    const onScroll = () => {
                        const scrolled = window.scrollY > 6;
                        header?.classList.toggle("border-white/20", scrolled);
                        header?.classList.toggle("shadow-soft", scrolled);
                    };
                    onScroll();
                    window.addEventListener("scroll", onScroll, {passive: true});
                }
            }
        );

        // Hero component
        customElements.define(
            "hero-section",
            class extends HTMLElement {
                connectedCallback() {
                    this.innerHTML = `
              <div
                class="container mx-auto relative px-6 sm:px-8 grid lg:grid-cols-2 gap-10 items-center"
              >
                <div class="relative z-10">
                  <p class="text-sm uppercase tracking-widest text-slate-400">
                    Hi, I'm
                  </p>
                  <h1
                    class="mt-2 text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight"
                  >
                    Alex Doe
                    <span class="block text-gradient">Full‑Stack Engineer</span>
                  </h1>
                  <p class="mt-4 text-slate-300 max-w-prose">
                    I craft fast, accessible web apps with a keen eye for UX.
                    Focused on TypeScript, design systems, and delightful
                    interactions.
                  </p>

                  <div class="mt-6 flex flex-wrap items-center gap-3">
                    <a class="btn btn-primary" href="#" target="_blank">
                      ${Icons.download}
                      <span>Download Résumé</span>
                    </a>
                    <a class="btn btn-ghost" href="#projects">
                      ${Icons.arrowR}
                      <span>View Projects</span>
                    </a>
                    <div class="flex items-center gap-2 ml-1">
                      <a
                        class="btn btn-ghost !p-2 h-10 w-10"
                        href="https://github.com/"
                        target="_blank"
                        aria-label="GitHub"
                      >
                        ${Icons.github}
                      </a>
                      <a
                        class="btn btn-ghost !p-2 h-10 w-10"
                        href="https://www.linkedin.com/"
                        target="_blank"
                        aria-label="LinkedIn"
                      >
                        ${Icons.linkedin}
                      </a>
                      <a
                        class="btn btn-ghost !p-2 h-10 w-10"
                        href="https://x.com/"
                        target="_blank"
                        aria-label="X"
                      >
                        ${Icons.x}
                      </a>
                    </div>
                  </div>

                  <div class="mt-8 flex items-center gap-3 text-sm text-slate-400">
                    <span class="inline-flex h-2 w-2 rounded-full bg-emerald-400"></span>
                    Available for freelance projects
                  </div>
                </div>

                <div class="relative">
                  <div
                    class="relative mx-auto aspect-square w-72 sm:w-80 lg:w-[28rem] rounded-[2rem] overflow-hidden border border-white/10 bg-white/5 backdrop-blur"
                  >
                    <div
                      class="absolute inset-0 bg-gradient-to-br from-brand-500/20 via-transparent to-glow-500/10"
                    ></div>
                    <img
                      src="https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=1200&auto=format&fit=crop"
                      alt="Portrait of Alex"
                      class="absolute inset-0 h-full w-full object-cover"
                    />
                  </div>
                  <div
                    class="absolute -z-10 -inset-6 bg-gradient-to-tr from-brand-600/20 via-transparent to-glow-600/20 blur-3xl"
                    aria-hidden="true"
                  ></div>
                </div>
              </div>
            `;
                }
            }
        );

        // Projects component
        customElements.define(
            "projects-grid",
            class extends HTMLElement {
                connectedCallback() {
                    const projects = [
                        {
                            title: "Pulse UI",
                            desc: "A headless, accessible component library for React + Tailwind.",
                            tags: ["TypeScript", "React", "Tailwind", "Vite"],
                            live: "https://example.com",
                            repo: "#",
                            accent: "from-brand-500/20 to-glow-500/20",
                        },
                        {
                            title: "Wave Analytics",
                            desc: "Streaming analytics dashboard with real-time charts.",
                            tags: ["Next.js", "tRPC", "Postgres", "WebSockets"],
                            live: "https://example.com",
                            repo: "#",
                            accent: "from-sky-500/20 to-fuchsia-500/20",
                        },
                        {
                            title: "Slate CMS",
                            desc: "Markdown-first CMS with Git-based workflows.",
                            tags: ["Node", "Express", "MongoDB", "S3"],
                            live: "https://example.com",
                            repo: "#",
                            accent: "from-emerald-500/20 to-cyan-500/20",
                        },
                        {
                            title: "Neon Shop",
                            desc: "Headless e-commerce storefront with edge caching.",
                            tags: ["Nuxt", "Stripe", "Prisma", "Cloudflare"],
                            live: "https://example.com",
                            repo: "#",
                            accent: "from-pink-500/20 to-purple-500/20",
                        },
                    ];

                    this.innerHTML = `
              <div
                class="grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3"
              >
                ${projects
                            .map(
                                (p, i) => `
                  <article class="group card overflow-hidden relative">
                    <div
                      class="absolute inset-0 bg-gradient-to-br ${p.accent} opacity-0 group-hover:opacity-100 transition"
                    ></div>
                    <div class="relative p-5 sm:p-6 flex flex-col gap-4">
                      <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold">${p.title}</h3>
                        <div class="flex items-center gap-2">
                          <a class="btn btn-ghost !px-2 !py-1.5" href="${p.live
                                    }" target="_blank" aria-label="Live demo">
                            ${Icons.ext}
                          </a>
                          <a class="btn btn-ghost !px-2 !py-1.5" href="${p.repo
                                    }" target="_blank" aria-label="Repository">
                            ${Icons.link}
                          </a>
                        </div>
                      </div>
                      <p class="text-slate-300 text-sm">${p.desc}</p>
                      <div class="flex flex-wrap gap-2">
                        ${p.tags
                                        .map((t) => `<span class="tag">${t}</span>`)
                                        .join("")}
                      </div>
                    </div>
                    <div
                      class="h-36 sm:h-40 border-t border-white/10 bg-gradient-to-tr from-white/5 to-white/10"
                    >
                      <div
                        class="h-full w-full bg-[radial-gradient(closest-side,rgba(255,255,255,0.07),transparent_70%)]"
                      ></div>
                    </div>
                  </article>
                `
                            )
                            .join("")}
              </div>
            `;
                }
            }
        );

        // Skills marquee component
        customElements.define(
            "skills-marquee",
            class extends HTMLElement {
                connectedCallback() {
                    const items = [
                        "TypeScript",
                        "React",
                        "Next.js",
                        "Node.js",
                        "Web Components",
                        "Tailwind CSS",
                        "tRPC",
                        "GraphQL",
                        "Prisma",
                        "PostgreSQL",
                        "Redis",
                        "Playwright",
                        "Vitest",
                        "Vite",
                        "Docker",
                        "Cloudflare",
                        "AWS",
                        "CI/CD",
                        "Accessibility",
                        "Design Systems",
                    ];

                    const chip = (t) =>
                        `<span class="tag whitespace-nowrap">${t}</span>`;

                    this.innerHTML = `
              <div class="marquee group cursor-grab active:cursor-grabbing">
                <div class="marquee-track group-hover:[animation-play-state:paused]">
                  ${[...items, ...items].map(chip).join("")}
                </div>
                <div class="marquee-track group-hover:[animation-play-state:paused] -ml-[50%]">
                  ${[...items, ...items].map(chip).join("")}
                </div>
              </div>
            `;

                    // Allow drag to scroll manually
                    const container = this.querySelector(".marquee");
                    let isDown = false;
                    let startX = 0;
                    let scrollLeft = 0;
                    container.addEventListener("mousedown", (e) => {
                        isDown = true;
                        startX = e.pageX;
                        container.style.setProperty("--speed", "9999s");
                    });
                    window.addEventListener("mouseup", () => {
                        if (!isDown) return;
                        isDown = false;
                        container.style.removeProperty("--speed");
                    });
                    container.addEventListener("mousemove", (e) => {
                        if (!isDown) return;
                        const walk = (e.pageX - startX) * 0.5;
                        container.scrollLeft = scrollLeft - walk;
                    });
                    container.addEventListener("scroll", () => {
                        if (!isDown) scrollLeft = container.scrollLeft;
                    });
                }
            }
        );

        // Contact component
        customElements.define(
            "contact-section",
            class extends HTMLElement {
                connectedCallback() {
                    this.innerHTML = `
              <div class="card p-6 sm:p-8 relative overflow-hidden">
                <div
                  aria-hidden="true"
                  class="absolute -top-24 -right-24 h-72 w-72 rounded-full bg-gradient-to-br from-brand-600/20 to-glow-600/10 blur-3xl"
                ></div>

                <div class="relative grid md:grid-cols-2 gap-8 items-start">
                  <div>
                    <h2 class="text-2xl font-bold">
                      Let's build something <span class="text-gradient">great</span>
                    </h2>
                    <p class="mt-3 text-slate-300">
                      Have an idea or a position in mind? I’m open to freelance,
                      contracting, and full‑time roles.
                    </p>

                    <div class="mt-6 flex items-center gap-3">
                      <div
                        class="flex items-center gap-2 rounded-xl bg-white/5 border border-white/10 px-3 py-2"
                      >
                        ${Icons.mail}
                        <span class="text-sm">alex.doe@example.com</span>
                      </div>
                      <button class="btn btn-ghost" id="copyEmail">
                        ${Icons.copy}
                        Copy
                      </button>
                    </div>
                  </div>

                  <form class="grid gap-3" id="contactForm">
                    <div class="grid gap-2">
                      <label class="text-sm text-slate-300">Name</label>
                      <input
                        required
                        name="name"
                        class="w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2.5 outline-none focus:ring-2 focus:ring-brand-500"
                        placeholder="Your name"
                      />
                    </div>
                    <div class="grid gap-2">
                      <label class="text-sm text-slate-300">Email</label>
                      <input
                        required
                        type="email"
                        name="email"
                        class="w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2.5 outline-none focus:ring-2 focus:ring-brand-500"
                        placeholder="you@domain.com"
                      />
                    </div>
                    <div class="grid gap-2">
                      <label class="text-sm text-slate-300">Message</label>
                      <textarea
                        required
                        name="message"
                        rows="4"
                        class="w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2.5 outline-none focus:ring-2 focus:ring-brand-500"
                        placeholder="Tell me about your project..."
                      ></textarea>
                    </div>
                    <div class="flex items-center gap-3">
                      <button class="btn btn-primary" type="submit">
                        Send message
                      </button>
                      <span class="text-xs text-slate-400"
                        >This sends via your email client</span
                      >
                    </div>
                  </form>
                </div>
              </div>
            `;

                    // Copy email
                    const copyBtn = this.querySelector("#copyEmail");
                    copyBtn?.addEventListener("click", async () => {
                        const email = "alex.doe@example.com";
                        try {
                            await navigator.clipboard.writeText(email);
                            copyBtn.innerHTML = `${Icons.check} Copied`;
                            setTimeout(
                                () => (copyBtn.innerHTML = `${Icons.copy} Copy`),
                                1600
                            );
                        } catch {
                            alert(email);
                        }
                    });

                    // Mailto submit
                    const form = this.querySelector("#contactForm");
                    form?.addEventListener("submit", (e) => {
                        e.preventDefault();
                        const d = new FormData(form);
                        const subject = encodeURIComponent(
                            `Portfolio inquiry from ${d.get("name")}`
                        );
                        const body = encodeURIComponent(
                            `Hi Alex,%0D%0A%0D%0A${d.get(
                                "message"
                            )}%0D%0A%0D%0A— ${d.get("name")} (${d.get("email")})`
                        );
                        window.location.href = `mailto:alex.doe@example.com?subject=${subject}&body=${body}`;
                    });
                }
            }
        );

        // Footer component
        customElements.define(
            "site-footer",
            class extends HTMLElement {
                connectedCallback() {
                    const year = new Date().getFullYear();
                    this.innerHTML = `
              <footer class="mt-16 mb-8">
                <div class="container mx-auto px-6 sm:px-8 text-sm text-slate-400">
                  <div class="border-t border-white/10 pt-6 flex flex-col sm:flex-row items-center justify-between gap-3">
                    <p>© ${year} Alex Doe. All rights reserved.</p>
                    <div class="flex items-center gap-4">
                      <a class="hover:text-white" href="#">Privacy</a>
                      <a class="hover:text-white" href="#">Imprint</a>
                    </div>
                  </div>
                </div>
              </footer>
            `;
                }
            }
        );

        // Bubble Background component (Shadow DOM - canvas only)
        class BubbleBackground extends HTMLElement {
            constructor() {
                super();
                this.attachShadow({mode: "open"});
                this.canvas = document.createElement("canvas");
                this.shadowRoot.appendChild(this.canvas);

                // Position the host behind content
                Object.assign(this.style, {
                    position: "fixed",
                    inset: "0",
                    zIndex: "-1",
                    pointerEvents: "none",
                });

                this.ctx = this.canvas.getContext("2d", {alpha: true});
                this.bubbles = [];
                this.mouse = {x: 0, y: 0, active: false};
                this.raf = 0;
                this.last = 0;
                this.paused = false;
            }

            connectedCallback() {
                this.handleResize = this.resize.bind(this);
                this.handlePointerMove = this.onPointerMove.bind(this);
                this.handlePointerLeave = this.onPointerLeave.bind(this);
                this.handleVisibility = this.onVisibility.bind(this);

                window.addEventListener("resize", this.handleResize);
                window.addEventListener("pointermove", this.handlePointerMove, {
                    passive: true,
                });
                window.addEventListener("pointerleave", this.handlePointerLeave);
                document.addEventListener("visibilitychange", this.handleVisibility);

                this.resize();
                this.initBubbles();
                this.loop(0);
            }

            disconnectedCallback() {
                cancelAnimationFrame(this.raf);
                window.removeEventListener("resize", this.handleResize);
                window.removeEventListener("pointermove", this.handlePointerMove);
                window.removeEventListener("pointerleave", this.handlePointerLeave);
                document.removeEventListener(
                    "visibilitychange",
                    this.handleVisibility
                );
            }

            onVisibility() {
                this.paused = document.hidden;
                if (!this.paused) this.loop(performance.now());
            }

            onPointerMove(e) {
                const rect = this.canvas.getBoundingClientRect();
                this.mouse.x = (e.clientX - rect.left) * this.dpr;
                this.mouse.y = (e.clientY - rect.top) * this.dpr;
                this.mouse.active = true;
            }
            onPointerLeave() {
                this.mouse.active = false;
            }

            resize() {
                const {innerWidth: w, innerHeight: h, devicePixelRatio: dpr} =
                    window;
                this.dpr = Math.min(2, dpr || 1);
                this.canvas.width = Math.floor(w * this.dpr);
                this.canvas.height = Math.floor(h * this.dpr);
                this.canvas.style.width = w + "px";
                this.canvas.style.height = h + "px";

                // Recalculate bubble count based on area
                const area = (w * h) / 1000;
                const target = Math.max(
                    18,
                    Math.min(80, Math.floor(area / (window.innerWidth < 640 ? 75 : 120)))
                );
                this.targetCount = target;
                if (this.bubbles.length < target) {
                    for (let i = this.bubbles.length; i < target; i++) {
                        this.bubbles.push(this.spawn());
                    }
                } else if (this.bubbles.length > target) {
                    this.bubbles.splice(target);
                }
            }

            palette() {
                // Purple / Cyan / Blue hues
                const hues = [275, 190, 210, 165];
                const h = hues[Math.floor(Math.random() * hues.length)];
                const s = 70 + Math.random() * 20;
                const l = 55 + Math.random() * 10;
                return {h, s, l};
            }

            spawn() {
                const {width: w, height: h} = this.canvas;
                const r = (Math.random() ** 2) * 40 + 10; // bias to smaller
                const vel = 0.08 + Math.random() * 0.35;
                const angle = Math.random() * Math.PI * 2;
                const color = this.palette();
                return {
                    x: Math.random() * w,
                    y: Math.random() * h,
                    vx: Math.cos(angle) * vel,
                    vy: Math.sin(angle) * vel,
                    r,
                    color,
                    wobble: Math.random() * Math.PI * 2,
                    wobbleSpeed: 0.002 + Math.random() * 0.004,
                };
            }

            initBubbles() {
                this.bubbles.length = 0;
                for (let i = 0; i < (this.targetCount || 50); i++) {
                    this.bubbles.push(this.spawn());
                }
            }

            drawBubble(b) {
                const {ctx} = this;
                const grad = ctx.createRadialGradient(
                    b.x - b.r * 0.3,
                    b.y - b.r * 0.3,
                    b.r * 0.1,
                    b.x,
                    b.y,
                    b.r * 1.2
                );
                const c1 = `hsla(${b.color.h} ${b.color.s}% ${b.color.l}% / 0.9)`;
                const c2 = `hsla(${b.color.h} ${b.color.s}% ${b.color.l - 10}% / 0.05)`;
                grad.addColorStop(0, c1);
                grad.addColorStop(1, c2);
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
                ctx.fill();
            }

            loop(ts) {
                if (this.paused) return;
                this.raf = requestAnimationFrame(this.loop.bind(this));
                const {ctx, canvas, dpr} = this;

                // Delta
                const dt = Math.min(32, ts - this.last || 16);
                this.last = ts;

                // Clear with subtle fade for trails
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "rgba(10, 12, 28, 0.55)";
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.globalCompositeOperation = "lighter";

                // Update and draw
                const mx = this.mouse.x;
                const my = this.mouse.y;
                const interact = this.mouse.active;

                for (let b of this.bubbles) {
                    // Wobble
                    b.wobble += b.wobbleSpeed * dt;
                    const wobX = Math.cos(b.wobble) * 0.15;
                    const wobY = Math.sin(b.wobble) * 0.15;

                    // Mouse repulsion
                    if (interact) {
                        const dx = b.x - mx;
                        const dy = b.y - my;
                        const dist2 = dx * dx + dy * dy;
                        const r = (b.r + 80) * dpr;
                        const range2 = r * r;
                        if (dist2 < range2 && dist2 > 0.01) {
                            const force = (range2 - dist2) / range2;
                            const inv = 1 / Math.sqrt(dist2);
                            b.vx += (dx * inv) * force * 0.06;
                            b.vy += (dy * inv) * force * 0.06;
                        }
                    }

                    // Integrate
                    b.x += (b.vx + wobX) * dt;
                    b.y += (b.vy + wobY) * dt;

                    // Gentle pull toward center to avoid clustering on edges
                    const cx = canvas.width * 0.5;
                    const cy = canvas.height * 0.5;
                    b.vx += (cx - b.x) * 0.000003 * dt;
                    b.vy += (cy - b.y) * 0.000003 * dt;

                    // Friction
                    b.vx *= 0.999;
                    b.vy *= 0.999;

                    // Wrap around edges
                    if (b.x < -b.r) b.x = canvas.width + b.r;
                    if (b.x > canvas.width + b.r) b.x = -b.r;
                    if (b.y < -b.r) b.y = canvas.height + b.r;
                    if (b.y > canvas.height + b.r) b.y = -b.r;

                    // Draw
                    this.drawBubble(b);
                }

                ctx.globalCompositeOperation = "source-over";
            }
        }
        customElements.define("bubble-background", BubbleBackground);
    </script>
</body>

</html>
